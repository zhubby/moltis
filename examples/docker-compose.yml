# Moltis Docker Compose example
#
# Usage:
#   docker compose up -d
#   open https://localhost:13131
#
# On first launch, a setup code is printed to the logs:
#   docker compose logs moltis
#
# Configuration and data are stored in local directories:
#   ./config - moltis.toml, credentials.json, mcp-servers.json
#   ./data   - databases, sessions, memory files
#
# For Podman, see the rootless/rootful socket paths below.

services:
  moltis:
    image: ghcr.io/moltis-org/moltis:latest
    container_name: moltis
    restart: unless-stopped
    ports:
      - "13131:13131"
      - "13132:13132"
    volumes:
      # Configuration files (editable from host)
      - ./config:/home/moltis/.config/moltis

      # Data directory (databases, sessions, memory)
      - ./data:/home/moltis/.moltis

      # Docker socket for sandbox command execution
      # Without this, the agent cannot run shell commands in isolated containers
      - /var/run/docker.sock:/var/run/docker.sock

      # For Podman rootless, use:
      # - /run/user/1000/podman/podman.sock:/var/run/docker.sock
      #
      # For Podman rootful, use:
      # - /run/podman/podman.sock:/var/run/docker.sock
