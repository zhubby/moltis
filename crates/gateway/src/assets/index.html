<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="color-scheme" content="dark light">
<title>moltis</title>
<link rel="stylesheet" href="/assets/style.css">
</head>
<body>

<!-- Top bar -->
<header class="flex items-center gap-3 px-4 py-2.5 border-b border-[var(--border)] bg-[var(--surface)] shrink-0">
  <button id="burgerBtn" class="burger-btn" title="Navigation">
    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" width="20" height="20"><path d="M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"/></svg>
  </button>
  <h1 class="text-base font-medium tracking-wide text-[var(--text-strong)]">moltis</h1>
  <span class="status-dot" id="statusDot"></span>
  <span class="text-xs text-[var(--muted)]" id="statusText">disconnected</span>
  <!-- Model selector (searchable) -->
  <div id="modelCombo" class="model-combo hidden">
    <button id="modelComboBtn" class="model-combo-btn" type="button">
      <span id="modelComboLabel">no models</span>
      <svg class="model-combo-chevron" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" width="12" height="12"><path d="M19.5 8.25l-7.5 7.5-7.5-7.5"/></svg>
    </button>
    <div id="modelDropdown" class="model-dropdown hidden">
      <input id="modelSearchInput" type="text" placeholder="Search models…" class="model-search-input" autocomplete="off" />
      <div id="modelDropdownList" class="model-dropdown-list"></div>
    </div>
  </div>
  <button id="addProviderBtn" class="text-xs text-[var(--muted)] border border-[var(--border)] w-7 h-7 rounded-md hover:text-[var(--text)] hover:border-[var(--border-strong)] transition-colors cursor-pointer bg-transparent font-[var(--font-body)] flex items-center justify-center" title="Add provider">+</button>

  <div class="flex-1"></div>

  <!-- Theme toggle -->
  <div class="theme-toggle" id="themeToggle">
    <button class="theme-btn" data-theme-val="light" title="Light theme">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><circle cx="12" cy="12" r="5"/><path d="M12 1v2m0 18v2M4.22 4.22l1.42 1.42m12.72 12.72 1.42 1.42M1 12h2m18 0h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42"/></svg>
    </button>
    <button class="theme-btn" data-theme-val="system" title="System theme">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><rect x="2" y="3" width="20" height="14" rx="2"/><path d="M8 21h8m-4-4v4"/></svg>
    </button>
    <button class="theme-btn" data-theme-val="dark" title="Dark theme">
      <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path d="M21.752 15.002A9.72 9.72 0 0 1 18 15.75 9.75 9.75 0 0 1 8.25 6c0-1.33.266-2.597.748-3.752A9.753 9.753 0 0 0 3 11.25 9.75 9.75 0 0 0 12.75 21a9.753 9.753 0 0 0 9.002-5.998Z"/></svg>
    </button>
  </div>

  <button class="text-xs text-[var(--muted)] border border-[var(--border)] px-2.5 py-1 rounded-md hover:text-[var(--text)] hover:border-[var(--border-strong)] transition-colors cursor-pointer bg-transparent font-[var(--font-body)]" id="sessionsToggle">Sessions</button>
</header>

<!-- Main layout -->
<div class="flex flex-1 overflow-hidden">
  <!-- Navigation panel -->
  <nav id="navPanel" class="nav-panel hidden">
    <div class="px-3 py-2.5 border-b border-[var(--border)]">
      <span class="text-sm text-[var(--muted)] font-medium">Navigation</span>
    </div>
    <div class="flex-1 flex flex-col py-1">
      <a href="/" data-nav class="nav-link active">Chat</a>
      <a href="/projects" data-nav class="nav-link">Projects</a>
      <a href="/crons" data-nav class="nav-link">Crons</a>
      <a href="/methods" data-nav class="nav-link">Methods</a>
    </div>
  </nav>

  <!-- Sessions sidebar -->
  <div class="w-[240px] border-r border-[var(--border)] flex flex-col bg-[var(--surface)] shrink-0 hidden" id="sessionsPanel">
    <div class="px-3 py-2.5 border-b border-[var(--border)] flex items-center justify-between">
      <span class="text-sm text-[var(--muted)] font-medium">Sessions</span>
      <button id="newSessionBtn" class="text-xs text-[var(--muted)] border border-[var(--border)] px-2 py-0.5 rounded hover:text-[var(--text)] hover:border-[var(--border-strong)] transition-colors cursor-pointer bg-transparent">+ New</button>
    </div>
    <!-- Project selector -->
    <div class="px-3 py-2 border-b border-[var(--border)] flex items-center gap-2">
      <select id="projectSelect" class="flex-1 text-xs bg-[var(--surface2)] border border-[var(--border)] rounded px-2 py-1.5 text-[var(--text)] focus:outline-none focus:border-[var(--border-strong)] cursor-pointer" style="font-family:var(--font-body)">
        <option value="">No project</option>
      </select>
      <button id="manageProjectsBtn" class="text-xs text-[var(--muted)] border border-[var(--border)] px-2 py-0.5 rounded hover:text-[var(--text)] hover:border-[var(--border-strong)] transition-colors cursor-pointer bg-transparent" title="Manage projects">+</button>
    </div>
    <div class="px-3 py-2 border-b border-[var(--border)]" style="position:relative">
      <input id="sessionSearch" type="text" placeholder="Search sessions…"
             class="w-full text-xs bg-[var(--surface2)] border border-[var(--border)] rounded px-2 py-1.5 text-[var(--text)] focus:outline-none focus:border-[var(--border-strong)]" style="font-family:var(--font-body)" />
      <div id="searchResults" class="hidden"></div>
    </div>
    <div class="flex-1 overflow-y-auto" id="sessionList"></div>
  </div>

  <!-- Page content (swapped by router) -->
  <div id="pageContent" class="flex-1 flex min-w-0"></div>
</div>

<!-- Provider modal -->
<div id="providerModal" class="provider-modal-backdrop hidden">
  <div class="provider-modal">
    <div class="provider-modal-header">
      <span class="text-sm font-medium text-[var(--text-strong)]" id="providerModalTitle">Add Provider</span>
      <button id="providerModalClose" class="text-[var(--muted)] hover:text-[var(--text)] cursor-pointer bg-transparent border-none text-lg leading-none">&times;</button>
    </div>
    <div class="provider-modal-body" id="providerModalBody">
      <!-- Populated by JS -->
    </div>
  </div>
</div>

<!-- Project modal -->
<div id="projectModal" class="provider-modal-backdrop hidden">
  <div class="provider-modal">
    <div class="provider-modal-header">
      <span class="text-sm font-medium text-[var(--text-strong)]" id="projectModalTitle">Manage Projects</span>
      <button id="projectModalClose" class="text-[var(--muted)] hover:text-[var(--text)] cursor-pointer bg-transparent border-none text-lg leading-none">&times;</button>
    </div>
    <div class="provider-modal-body" id="projectModalBody">
      <!-- Project list populated by JS -->
    </div>
  </div>
</div>

<script src="/assets/app.js"></script>
</body>
</html>
