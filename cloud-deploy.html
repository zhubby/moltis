<!DOCTYPE HTML>
<html lang="en" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Cloud Deploy - Moltis Documentation</title>


        <!-- Custom HTML head -->

        <meta name="description" content="Documentation for Moltis - Your AI coding assistant">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/admonish.css">
        <link rel="stylesheet" href="theme/custom.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Moltis Documentation</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/moltis-org/moltis" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/moltis-org/moltis/edit/main/docs/src/src/cloud-deploy.md" title="Suggest an edit" aria-label="Suggest an edit" rel="edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cloud-deploy"><a class="header" href="#cloud-deploy">Cloud Deploy</a></h1>
<p>Moltis publishes a multi-arch Docker image (<code>linux/amd64</code> and <code>linux/arm64</code>)
to <code>ghcr.io/moltis-org/moltis</code>. You can deploy it to any cloud provider that
supports container images.</p>
<h2 id="common-configuration"><a class="header" href="#common-configuration">Common configuration</a></h2>
<p>All cloud providers terminate TLS at the edge, so Moltis must run in plain
HTTP mode. The key settings are:</p>
<div class="table-wrapper"><table><thead><tr><th>Setting</th><th>Value</th><th>Purpose</th></tr></thead><tbody>
<tr><td><code>--no-tls</code> or <code>MOLTIS_NO_TLS=true</code></td><td>Disable TLS</td><td>Provider handles HTTPS</td></tr>
<tr><td><code>--bind 0.0.0.0</code></td><td>Bind all interfaces</td><td>Required for container networking</td></tr>
<tr><td><code>--port &lt;PORT&gt;</code></td><td>Listen port</td><td>Must match provider’s expected internal port</td></tr>
<tr><td><code>MOLTIS_CONFIG_DIR=/data/config</code></td><td>Config directory</td><td>Persist moltis.toml, credentials</td></tr>
<tr><td><code>MOLTIS_DATA_DIR=/data</code></td><td>Data directory</td><td>Persist databases, sessions, memory</td></tr>
<tr><td><code>MOLTIS_DEPLOY_PLATFORM</code></td><td>Deploy platform</td><td>Hides local-only providers (see below)</td></tr>
<tr><td><code>MOLTIS_PASSWORD</code></td><td>Initial password</td><td>Set auth password via environment variable</td></tr>
</tbody></table>
</div><div id="admonition-warning" class="admonition admonish-warning" role="note" aria-labelledby="admonition-warning-title">
<div class="admonition-title">
<div id="admonition-warning-title">
<p>Warning</p>
</div>
<a class="admonition-anchor-link" href="#admonition-warning"></a>
</div>
<div>
<p><strong>Sandbox limitation</strong>: Most cloud providers do not support Docker-in-Docker.
The sandboxed command execution feature (where the LLM runs shell commands
inside isolated containers) will not work on these platforms. The agent will
still function for chat, tool calls that don’t require shell execution, and
MCP server connections.</p>
</div>
</div>
<h3 id="moltis_deploy_platform"><a class="header" href="#moltis_deploy_platform"><code>MOLTIS_DEPLOY_PLATFORM</code></a></h3>
<p>Set this to the name of your cloud provider (e.g. <code>flyio</code>, <code>digitalocean</code>,
<code>render</code>). When set, Moltis hides local-only LLM providers
(local-llm and Ollama) from the provider setup page since they cannot run
on cloud VMs. The included deploy templates for Fly.io, DigitalOcean, and
Render already set this variable.</p>
<h2 id="coolify-self-hosted-eg-hetzner"><a class="header" href="#coolify-self-hosted-eg-hetzner">Coolify (self-hosted, e.g. Hetzner)</a></h2>
<p>Coolify deployments can run Moltis with sandboxed exec tools, as long as the
service mounts the host Docker socket.</p>
<ul>
<li>Use <a href="../examples/docker-compose.coolify.yml"><code>examples/docker-compose.coolify.yml</code></a>
as a starting point.</li>
<li>Run Moltis with <code>--no-tls</code> (Coolify terminates HTTPS at the proxy).</li>
<li>Set <code>MOLTIS_BEHIND_PROXY=true</code> so client IP/auth behavior is correct behind
reverse proxying.</li>
<li>Mount <code>/var/run/docker.sock:/var/run/docker.sock</code> to enable container-backed
sandbox execution.</li>
</ul>
<h2 id="flyio"><a class="header" href="#flyio">Fly.io</a></h2>
<p>The repository includes a <code>fly.toml</code> ready to use.</p>
<h3 id="quick-start"><a class="header" href="#quick-start">Quick start</a></h3>
<pre><code class="language-bash"># Install the Fly CLI if you haven't already
curl -L https://fly.io/install.sh | sh

# Launch from the repo (uses fly.toml)
fly launch --image ghcr.io/moltis-org/moltis:latest

# Set your password
fly secrets set MOLTIS_PASSWORD="your-password"

# Create persistent storage
fly volumes create moltis_data --region iad --size 1
</code></pre>
<h3 id="how-it-works"><a class="header" href="#how-it-works">How it works</a></h3>
<ul>
<li><strong>Image</strong>: pulled from <code>ghcr.io/moltis-org/moltis:latest</code></li>
<li><strong>Port</strong>: internal 8080, Fly terminates TLS and routes HTTPS traffic</li>
<li><strong>Storage</strong>: a Fly Volume mounted at <code>/data</code> persists the database, sessions,
and memory files</li>
<li><strong>Auto-scaling</strong>: machines stop when idle and start on incoming requests</li>
</ul>
<h3 id="custom-domain"><a class="header" href="#custom-domain">Custom domain</a></h3>
<pre><code class="language-bash">fly certs add your-domain.com
</code></pre>
<p>Then point a CNAME to <code>your-app.fly.dev</code>.</p>
<h2 id="digitalocean-app-platform"><a class="header" href="#digitalocean-app-platform">DigitalOcean App Platform</a></h2>
<p><a href="https://cloud.digitalocean.com/apps/new?repo=https://github.com/moltis-org/moltis/tree/main"><img src="https://www.deploytodo.com/do-btn-blue.svg" alt="Deploy to DO" /></a></p>
<p>Click the button above or create an app manually:</p>
<ol>
<li>Go to <strong>Apps</strong> &gt; <strong>Create App</strong></li>
<li>Choose <strong>Container Image</strong> as source</li>
<li>Set image to <code>ghcr.io/moltis-org/moltis:latest</code></li>
<li>Set the run command: <code>moltis --bind 0.0.0.0 --port 8080 --no-tls</code></li>
<li>Set environment variables:
<ul>
<li><code>MOLTIS_DATA_DIR</code> = <code>/data</code></li>
<li><code>MOLTIS_PASSWORD</code> = your password</li>
</ul>
</li>
<li>Set the HTTP port to <code>8080</code></li>
</ol>
<div id="admonition-no-persistent-disk" class="admonition admonish-info" role="note" aria-labelledby="admonition-no-persistent-disk-title">
<div class="admonition-title">
<div id="admonition-no-persistent-disk-title">
<p>No persistent disk</p>
</div>
<a class="admonition-anchor-link" href="#admonition-no-persistent-disk"></a>
</div>
<div>
<p>DigitalOcean App Platform does not support persistent disks for image-based
services in the deploy template. Data will be lost on redeployment. For
persistent storage, consider using a DigitalOcean Droplet with Docker instead.</p>
</div>
</div>
<h2 id="render"><a class="header" href="#render">Render</a></h2>
<p><a href="https://render.com/deploy?repo=https://github.com/moltis-org/moltis"><img src="https://render.com/images/deploy-to-render-button.svg" alt="Deploy to Render" /></a></p>
<p>The repository includes a <code>render.yaml</code> blueprint. Click the button above or:</p>
<ol>
<li>Go to <strong>Dashboard</strong> &gt; <strong>New</strong> &gt; <strong>Blueprint</strong></li>
<li>Connect your fork of the Moltis repository</li>
<li>Render will detect <code>render.yaml</code> and configure the service</li>
</ol>
<h3 id="configuration-details"><a class="header" href="#configuration-details">Configuration details</a></h3>
<ul>
<li><strong>Port</strong>: Render uses port 10000 by default</li>
<li><strong>Persistent disk</strong>: 1 GB mounted at <code>/data</code> (included in the blueprint)</li>
<li><strong>Environment</strong>: set <code>MOLTIS_PASSWORD</code> in the Render dashboard under
<strong>Environment</strong> &gt; <strong>Secret Files</strong> or <strong>Environment Variables</strong></li>
</ul>
<!-- TODO: Railway deploy does not work yet
## Railway

The repository includes a `railway.json` configuration that sets the required
environment variables (`MOLTIS_CONFIG_DIR`, `MOLTIS_DATA_DIR`,
`MOLTIS_DEPLOY_PLATFORM`) automatically.

1. Create a new project on [Railway](https://railway.com)
2. Add a service from **Docker Image**: `ghcr.io/moltis-org/moltis:latest`
3. Railway injects the `$PORT` variable automatically; the `railway.json` start
   command handles the rest
4. Set additional environment variables in the Railway dashboard:
   - `MOLTIS_PASSWORD` = your password

### Persistent storage

Railway supports persistent volumes. Add one in the service settings and mount
it at `/data`.
-->
<h2 id="authentication"><a class="header" href="#authentication">Authentication</a></h2>
<p>On first launch, Moltis requires a password or passkey to be set. In cloud
deployments the easiest approach is to set the <code>MOLTIS_PASSWORD</code> environment
variable (or secret) before deploying. This pre-configures the password so the
setup code flow is skipped.</p>
<pre><code class="language-bash"># Fly.io
fly secrets set MOLTIS_PASSWORD="your-secure-password"

</code></pre>
<p>For Render and DigitalOcean, set the variable in the dashboard’s environment
settings.</p>
<h2 id="health-checks"><a class="header" href="#health-checks">Health checks</a></h2>
<p>All provider configs use the <code>/health</code> endpoint which returns HTTP 200 when
the gateway is ready. Configure your provider’s health check to use:</p>
<ul>
<li><strong>Path</strong>: <code>/health</code></li>
<li><strong>Method</strong>: <code>GET</code></li>
<li><strong>Expected status</strong>: <code>200</code></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="docker.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="system-prompt.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="docker.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="system-prompt.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
